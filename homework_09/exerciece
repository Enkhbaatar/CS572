1. db.zips.aggregate([{$match: {state:"WA"}}, {$group: {_id:"$state", zip_codes:{$addToSet:"$_id"}}}, {$project: {_id:0}}])
2. db.zips.aggregate([{$match: {pop:{$lt:5000}}},{$project: {_id:0, zip:"$_id"}}])
3. db.zips.aggregate([{$group:{_id:{city:"$city", state:"$state"},zips:{$sum:1}}}, {$match: {zips: {$gt:1}}},{$project:{_id:0, city:"$_id.city", state:"$_id.state", zips:"$zips"}},{$sort: {city:-1, state:-1}}])
4. db.zips.aggregate([{$group:{_id:{city:"$city", state:"$state"}, population:{$sum:"$pop"}}},{$sort:{population:1}}, {$group:{_id:"$_id.state", population: {$first: "$population"}, city:{$first:"$_id.city"}}}])